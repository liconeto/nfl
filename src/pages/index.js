import EastIcon from "@mui/icons-material/East";
import SportsFootballIcon from "@mui/icons-material/SportsFootball";
import Avatar from "@mui/material/Avatar";
import Box from "@mui/material/Box";
import Button from "@mui/material/Button";
import axios from "axios";
import { Inter } from "next/font/google";
import Head from "next/head";
import { useEffect, useState } from "react";
import NestedModal from "../components/modalTeam";

import Grid2 from "@mui/material/Unstable_Grid2"; // Grid version 2

const inter = Inter({ subsets: ["latin"] });

export default function Home() {
  const [nfl, setNfl] = useState([]);

  useEffect(() => {
    axios
      .get("http://localhost:3050/conferences")
      .then((response) => {
        setNfl(response.data);
      })
      .catch((err) => {
        console.error(`Iiiii deu ruim!!!  ${err}`);
      });
  }, []);

  return (
    <>
      <Head>
        <title> .: NFL :. </title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="container">
        <ul className="navUl">
          {nfl.map((afcTeams) => (
            <li className="navLi" key={afcTeams.id}>
              <SportsFootballIcon />
              {afcTeams.name}
              <ul className="navUl">
                {afcTeams.divisions.map((division) => (
                  <li className="liDiv" key={division.id}>
                    <EastIcon /> Divis√£o: {division.alias}
                    <Box className="boxTeams" sx={{ flexGrow: 2 }}>
                      <Grid2
                        container
                        spacing={{ xs: 2, md: 4 }}
                        columns={{ xs: 4, sm: 4, md: 4 }}
                      >
                        {division.teams.map((team) => (
                          <Grid2
                            xs={2}
                            sm={4}
                            md={2}
                            key={team.id}
                            style={{
                              color: "lime",
                              background: `linear-gradient(100deg,${team.team_colors[0].hex_color},${team.team_colors[1].hex_color})`,
                            }}
                          >
                            <NestedModal>
                              <Button href="#" size="large">
                                <Avatar
                                  src={team.venue.image}
                                  sx={{ width: 66, height: 66 }}
                                />
                              </Button>
                            </NestedModal>
                            {team.name}
                          </Grid2>
                        ))}
                      </Grid2>
                    </Box>
                  </li>
                ))}
              </ul>
            </li>
          ))}
        </ul>
      </div>
    </>
  );
}
